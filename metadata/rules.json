[
  {
    "id": "collections_mis_paid_extraction",
    "system": "collections_mis",
    "metric": "paid_amount",
    "target_entity": "loan",
    "target_grain": ["uuid"],
    "computation": {
      "description": "Collections MIS business rules",
      "source_entities": ["loan"],
      "source_table": "collections_mis",
      "attributes_needed": {
        "loan": ["uuid", "paid_date", "paid_amount"]
      },
      "formula": "paid_amount",
      "aggregation_grain": ["uuid"],
      "filter_conditions": {
        "mis_date": "2026-01-08",
        "paid_date": "IS NOT NULL",
        "paid_amount": "IS NOT NULL"
      },
      "note": "Date snapshot: 2026-01-08. Data quality: Must have paid_date and paid_amount."
    }
  },
  {
    "id": "outstanding_daily_paid_extraction",
    "system": "outstanding_daily",
    "metric": "paid_amount",
    "target_entity": "loan",
    "target_grain": ["uuid"],
    "computation": {
      "description": "Outstanding daily business rules",
      "source_entities": ["loan", "repayment"],
      "source_table": "outstanding_daily",
      "attributes_needed": {
        "loan": ["uuid", "order_id"],
        "repayment": ["order_id", "repay_id", "paid_date", "paid_amount"]
      },
      "formula": "paid_amount",
      "aggregation_grain": ["uuid"],
      "filter_conditions": {
        "last_day": "2026-01-07",
        "repayments.status": "SUCCESS",
        "repayments.__is_deleted": "false",
        "emi_payment_view.is_deleted": "false",
        "outstanding_daily.settlement_flag": "unsettled",
        "nbfc": "quadrillion, slicenesfb, nesfb",
        "order_type": "NOT credin"
      },
      "note": "Date snapshot: 2026-01-07. Business filters: Only successful repayments, exclude deleted records, only unsettled loans, specific NBFCs only, exclude credin orders."
    }
  }
]
