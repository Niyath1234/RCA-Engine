{
  "tables": [
    {
      "name": "repayments",
      "entity": "payment",
      "primary_key": ["repay_id"],
      "time_column": "created_at",
      "system": "system_a",
      "path": "tables/repayments.csv",
      "description": "Repayment transactions from System A. Contains all repayment records with user_uuid, repay_id, total_amount, payment status, and transaction details. Used for recovery reconciliation.",
      "grain": ["repay_id"],
      "labels": ["payments", "recovery", "reconciliation", "transactions"],
      "columns": [
        {"name": "repay_id", "data_type": "string", "description": "Unique repayment transaction ID"},
        {"name": "user_uuid", "data_type": "string", "description": "User UUID identifier for the customer"},
        {"name": "total_amount", "data_type": "decimal", "description": "Total payment amount in base currency"},
        {"name": "repayable_amount", "data_type": "decimal", "description": "Amount that was repayable"},
        {"name": "created_at", "data_type": "timestamp", "description": "Payment creation timestamp"},
        {"name": "status", "data_type": "string", "description": "Payment status (PENDING, IN_PROGRESS, SUCCESS, FAILED)"},
        {"name": "repayment_type", "data_type": "string", "description": "Type of repayment (ONLINE, OFFLINE)"},
        {"name": "payment_order_id", "data_type": "string", "description": "Payment gateway order ID"},
        {"name": "__is_deleted", "data_type": "boolean", "description": "Soft delete flag"}
      ]
    },
    {
      "name": "lmsdata_emi_payment_view",
      "entity": "payment",
      "primary_key": ["id"],
      "time_column": "payment_date",
      "system": "system_b",
      "path": "tables/lmsdata_emi_payment_view.csv",
      "description": "EMI payment data from System B (LMS). Contains detailed EMI payment records with uuid, repayment_txn_id, paid_amount, principal, interest, and late penalty components. Used for recovery reconciliation.",
      "grain": ["id"],
      "labels": ["payments", "recovery", "reconciliation", "emi", "lms"],
      "columns": [
        {"name": "uuid", "data_type": "string", "description": "User UUID identifier"},
        {"name": "repayment_txn_id", "data_type": "string", "description": "Repayment transaction ID (maps to repayments.repay_id)"},
        {"name": "paid_amount", "data_type": "decimal", "description": "Total amount paid"},
        {"name": "paidAmountMicro", "data_type": "decimal", "description": "Amount paid in micro units"},
        {"name": "payment_date", "data_type": "date", "description": "Payment date"},
        {"name": "principal_paid", "data_type": "decimal", "description": "Principal amount paid"},
        {"name": "interest_paid", "data_type": "decimal", "description": "Interest amount paid"},
        {"name": "late_interest_paid", "data_type": "decimal", "description": "Late interest paid"},
        {"name": "order_id", "data_type": "string", "description": "Order ID associated with payment"},
        {"name": "is_deleted", "data_type": "boolean", "description": "Soft delete flag"}
      ]
    },
    {
      "name": "current_month_collection_report",
      "entity": "collection",
      "primary_key": ["uuid"],
      "time_column": "paid_date",
      "system": "system_a",
      "path": "tables/current_month_collection_report.csv",
      "description": "Collection report from System A for current month. Contains uuid, paid_amount, paid_date, mis_date, bucket information, and collection team details. Used for collections MIS and recovery tracking.",
      "grain": ["uuid"],
      "labels": ["collections", "recovery", "reconciliation", "mis", "bucket"],
      "columns": [
        {"name": "uuid", "data_type": "string", "description": "User UUID identifier"},
        {"name": "paid_amount", "data_type": "decimal", "description": "Amount paid"},
        {"name": "paid_date", "data_type": "date", "description": "Payment date"},
        {"name": "mis_date", "data_type": "date", "description": "MIS date for reporting"},
        {"name": "current_bucket", "data_type": "string", "description": "Current delinquency bucket"},
        {"name": "dpd", "data_type": "integer", "description": "Days past due"},
        {"name": "emi", "data_type": "decimal", "description": "EMI amount"},
        {"name": "pos", "data_type": "decimal", "description": "Principal outstanding"}
      ]
    },
    {
      "name": "outstanding_daily",
      "entity": "loan",
      "primary_key": ["uuid", "order_id", "last_day"],
      "time_column": "last_day",
      "system": "system_a",
      "path": "tables/outstanding_daily.csv",
      "description": "Daily outstanding snapshot from System A. Contains loan-level outstanding amounts, DPD, arrears, NPA flags, and securitization information. Used for outstanding reconciliation and NPA tracking.",
      "grain": ["uuid", "order_id", "last_day"],
      "labels": ["outstanding", "loan", "npa", "securitization", "arrears"],
      "columns": [
        {"name": "uuid", "data_type": "string", "description": "User UUID identifier"},
        {"name": "order_id", "data_type": "string", "description": "Order ID"},
        {"name": "loan_id", "data_type": "string", "description": "Loan ID"},
        {"name": "last_day", "data_type": "date", "description": "Snapshot date"},
        {"name": "principal_outstanding", "data_type": "decimal", "description": "Principal outstanding amount"},
        {"name": "interest_outstanding", "data_type": "decimal", "description": "Interest outstanding amount"},
        {"name": "dpd", "data_type": "integer", "description": "Days past due"},
        {"name": "writeoff_flag", "data_type": "boolean", "description": "Writeoff flag"},
        {"name": "securitization_flag", "data_type": "boolean", "description": "Securitization flag"}
      ]
    },
    {
      "name": "da_orders",
      "entity": "order",
      "primary_key": ["order_id", "uuid"],
      "time_column": "da_date",
      "system": "system_a",
      "path": "tables/da_orders.csv",
      "description": "DA (Delegation of Authority) orders from System A. Contains order_id, uuid, securitization_nbfc, da_date, and POS on DA date. Used for securitization tracking and order management.",
      "grain": ["order_id", "uuid"],
      "labels": ["orders", "securitization", "da", "delegation"],
      "columns": [
        {"name": "order_id", "data_type": "string", "description": "Order ID"},
        {"name": "uuid", "data_type": "string", "description": "User UUID identifier"},
        {"name": "securitization_nbfc", "data_type": "string", "description": "Securitization NBFC name"},
        {"name": "da_date", "data_type": "date", "description": "Delegation of Authority date"},
        {"name": "pos_on_da_date", "data_type": "decimal", "description": "Principal outstanding on DA date"}
      ]
    },
    {
      "name": "provisional_writeoff",
      "entity": "writeoff",
      "primary_key": ["order_id", "uuid"],
      "time_column": "writeoff_date",
      "system": "system_a",
      "path": "tables/provisional_writeoff.csv",
      "description": "Provisional writeoff records from System A. Contains order_id, uuid, colending_flag, NPA start date, outstanding amounts, and writeoff date. Used for writeoff tracking and NPA management.",
      "grain": ["order_id", "uuid"],
      "labels": ["writeoff", "npa", "provisional", "colending"],
      "columns": [
        {"name": "order_id", "data_type": "string", "description": "Order ID"},
        {"name": "uuid", "data_type": "string", "description": "User UUID identifier"},
        {"name": "colending_flag", "data_type": "boolean", "description": "Co-lending flag"},
        {"name": "npa_start_date_irac", "data_type": "date", "description": "NPA start date as per IRAC norms"},
        {"name": "principal_outstanding", "data_type": "decimal", "description": "Principal outstanding at writeoff"},
        {"name": "interest_outstanding", "data_type": "decimal", "description": "Interest outstanding at writeoff"},
        {"name": "writeoff_date", "data_type": "date", "description": "Writeoff date"}
      ]
    },
    {
      "name": "writeoff_users",
      "entity": "writeoff",
      "primary_key": ["uuid", "order_id"],
      "time_column": "writeoff_date",
      "system": "system_a",
      "path": "tables/writeoff_users.csv",
      "description": "User-level writeoff records from System A. Contains uuid, order_id, NBFC name, DPD, writeoff amount, request date, flag, and writeoff date. Used for writeoff user tracking and reporting.",
      "grain": ["uuid", "order_id"],
      "labels": ["writeoff", "users", "nbfc", "dpd"],
      "columns": [
        {"name": "uuid", "data_type": "string", "description": "User UUID identifier"},
        {"name": "order_id", "data_type": "string", "description": "Order ID"},
        {"name": "nbfc_name", "data_type": "string", "description": "NBFC name"},
        {"name": "dpd", "data_type": "integer", "description": "Days past due"},
        {"name": "amt", "data_type": "decimal", "description": "Writeoff amount"},
        {"name": "req_date", "data_type": "date", "description": "Writeoff request date"},
        {"name": "flag", "data_type": "string", "description": "Writeoff flag"},
        {"name": "writeoff_date", "data_type": "date", "description": "Writeoff date"}
      ]
    }
  ]
}

